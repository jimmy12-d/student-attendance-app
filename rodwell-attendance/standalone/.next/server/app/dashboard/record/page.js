(()=>{var e={};e.id=407,e.ids=[407],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},12743:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o});var s=r(70260),a=r(28203),n=r(25155),i=r.n(n),l=r(67292),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);r.d(t,d);let o=["",{children:["dashboard",{children:["record",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,48439)),"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/record/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83748)),"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/record/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/record/page",pathname:"/dashboard/record",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},93536:(e,t,r)=>{Promise.resolve().then(r.bind(r,48439))},57088:(e,t,r)=>{Promise.resolve().then(r.bind(r,1426))},73537:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var s=r(45512);r(58009);let a=({title:e,children:t})=>(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3 pl-4",children:[(0,s.jsx)("h1",{className:"text-2xl",children:e}),t]})},72420:(e,t,r)=>{"use strict";r.d(t,{A:()=>c});var s=r(45512),a=r(12113),n=r(33883),i=r(95900),l=r(24719),d=r(73537),o=r(56492);let c=({title:e,buttonColor:t,buttonLabel:r,isActive:c,children:u,modalClassName:p="w-11/12 md:w-3/5 lg:w-2/5 xl:w-4/12",onConfirm:m,onCancel:x})=>{if(!c)return null;let h=(0,s.jsxs)(i.A,{type:"justify-end",children:[(0,s.jsx)(n.A,{label:r,color:t,onClick:m,isGrouped:!0}),!!x&&(0,s.jsx)(n.A,{label:"Cancel",color:t,outline:!0,onClick:x,isGrouped:!0})]});return(0,s.jsx)(o.A,{onClick:x,className:x?"cursor-pointer":"",children:(0,s.jsxs)(l.A,{className:`transition-transform shadow-lg max-h-modal ${p} z-50`,isModal:!0,footer:h,children:[(0,s.jsx)(d.A,{title:e,children:!!x&&(0,s.jsx)(n.A,{icon:a.hyP,color:"whiteDark",onClick:x,small:!0,roundedFull:!0})}),(0,s.jsx)("div",{className:"space-y-3 pl-4",children:u})]})})}},66055:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(45512),a=r(12113),n=r(58009),i=r(37954),l=r(33883),d=r(83877);let o=({outline:e=!1,children:t,...r})=>{let o=e?i.Fw[r.color]:i.cu[r.color],[c,u]=(0,n.useState)(!1);return c?null:(0,s.jsx)("div",{className:`px-3 py-6 md:py-3 mb-6 last:mb-0 border rounded-lg transition-colors duration-150 ${o}`,children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center mb-6 md:mb-0",children:[r.icon&&(0,s.jsx)(d.A,{path:r.icon,w:"w-10 md:w-5",h:"h-10 md:h-5",size:"24",className:"md:mr-2"}),(0,s.jsx)("span",{className:"text-center md:text-left md:py-2",children:t})]}),r.button,!r.button&&(0,s.jsx)(l.A,{icon:a.hyP,color:"white",onClick:e=>{e.preventDefault(),u(!0)},small:!0,roundedFull:!0})]})})}},80874:(e,t,r)=>{"use strict";r.d(t,{A:()=>l});var s=r(45512);r(58009);var a=r(83877),n=r(37954);function i({icon:e,color:t,w:r="w-12",h:i="h-12",bg:l=!1,className:d=""}){let o=l?n.cu[t]:`${n.Wj[t]} bg-gray-50 dark:bg-slate-800`;return(0,s.jsx)(a.A,{path:e,w:r,h:i,size:"24",className:`rounded-full ${o} ${d}`})}function l({icon:e,title:t,main:r=!1,children:n}){return(0,s.jsxs)("section",{className:`${r?"":"pt-6"} mb-6 flex items-center justify-between`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-start",children:[e&&r&&(0,s.jsx)(i,{icon:e,color:"light",className:"mr-3",bg:!0}),e&&!r&&(0,s.jsx)(a.A,{path:e,className:"mr-2",size:"20"}),(0,s.jsx)("h1",{className:`leading-tight ${r?"text-3xl":"text-2xl"}`,children:t})]}),n]})}},1426:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var s=r(45512),a=r(58009),n=r(12113),i=r(6204),l=r(80874),d=r(24719),o=r(72420),c=r(66055),u=r(17656),p=r(33883),m=r(95900);let x=e=>{let t;if(!e)return"N/A";if("string"==typeof e){let r=e.split("-");t=3!==r.length||isNaN(parseInt(r[0]))||isNaN(parseInt(r[1]))||isNaN(parseInt(r[2]))?new Date(e):new Date(parseInt(r[0]),parseInt(r[1])-1,parseInt(r[2]))}else if(e instanceof u.Dc)t=e.toDate();else{if(!(e instanceof Date))return"Invalid Date Type";t=e}if(isNaN(t.getTime()))return"Invalid Date";let r=String(t.getDate()).padStart(2,"0"),s=String(t.getMonth()+1).padStart(2,"0"),a=t.getFullYear();return`${r}-${s}-${a}`},h=({records:e,onDeleteRecord:t,perPage:r=10})=>{let[i,l]=(0,a.useState)(0),d=e.slice(r*i,r*(i+1)),o=Math.ceil(e.length/r),c=[];for(let e=0;e<o;e++)c.push(e);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Student Name"}),(0,s.jsx)("th",{children:"Class"}),(0,s.jsx)("th",{children:"Shift"}),(0,s.jsx)("th",{children:"Status"}),(0,s.jsx)("th",{children:"Date"}),(0,s.jsxs)("th",{children:["Time",(0,s.jsx)("span",{title:"Ordered by time",className:"ml-1 align-middle text-xs text-gray-400",children:"â–¼"})]}),(0,s.jsx)("th",{children:"Actions"})]})}),(0,s.jsx)("tbody",{children:d.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{"data-label":"Student Name",children:e.studentName}),(0,s.jsx)("td",{"data-label":"Class",children:e.class||"N/A"}),(0,s.jsx)("td",{"data-label":"Shift",children:e.shift||"N/A"}),(0,s.jsx)("td",{"data-label":"Status",children:(0,s.jsx)("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${"present"===e.status.toLowerCase()?"bg-green-200 text-green-800":"late"===e.status.toLowerCase()?"bg-yellow-200 text-yellow-800 border border-yellow-300":"absent"===e.status.toLowerCase()?"bg-red-200 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),(0,s.jsx)("td",{"data-label":"Date",className:"whitespace-nowrap",children:x(e.date)}),(0,s.jsx)("td",{"data-label":"Time",className:"whitespace-nowrap",children:e.timestamp instanceof u.Dc?e.timestamp.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}):e.timestamp instanceof Date?e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!0}):"N/A"}),(0,s.jsx)("td",{className:"text-center align-middle before:hidden lg:w-1 whitespace-nowrap",children:(0,s.jsx)(m.A,{type:"justify-center",noWrap:!0,children:(0,s.jsx)(p.A,{color:"danger",icon:n.Nnn,onClick:()=>t(e),small:!0,isGrouped:!0})})})]},e.id))})]})}),(0,s.jsx)("div",{className:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between py-3 md:py-0",children:[(0,s.jsx)(m.A,{children:c.map(e=>(0,s.jsx)(p.A,{active:e===i,label:(e+1).toString(),color:e===i?"lightDark":"whiteDark",small:!0,onClick:()=>l(e),isGrouped:!0},e))}),(0,s.jsxs)("small",{className:"mt-6 md:mt-0",children:["Page ",i+1," of ",o," (Total: ",e.length," records)"]})]})})]})};var f=r(65167);function b(){let[e,t]=(0,a.useState)([]),[r,p]=(0,a.useState)(!0),[m,x]=(0,a.useState)(null),[b,j]=(0,a.useState)(!1),[g,y]=(0,a.useState)(null);(0,a.useCallback)(async()=>{p(!0),x(null);try{let e=await (0,u.GG)((0,u.rJ)(f.db,"students")),r=new Map;e.forEach(e=>{r.set(e.id,{id:e.id,...e.data()})});let s=(0,u.P)((0,u.rJ)(f.db,"attendance"),(0,u.My)("date","desc"),(0,u.My)("timestamp","desc")),a=(await (0,u.GG)(s)).docs.map(e=>{let t=e.data(),s=r.get(t.studentId);return{id:e.id,studentName:s?s.fullName:t.studentName||"Unknown Student",class:t.class,shift:t.shift,status:t.status||"Unknown",date:t.date,timestamp:t.timestamp}});t(a)}catch(e){console.error("Error fetching attendance records: ",e),x("Failed to fetch attendance records. Please try again.")}p(!1)},[]);let w=async()=>{if(g){try{await (0,u.kd)((0,u.H9)(f.db,"attendance",g.id)),t(e=>e.filter(e=>e.id!==g.id))}catch(e){console.error("Error deleting attendance record: ",e),x("Failed to delete record. Please try again.")}j(!1),y(null)}};return(0,s.jsxs)(i.A,{children:[(0,s.jsx)(l.A,{icon:n.tPJ,title:"Attendance Records",main:!0}),m&&(0,s.jsx)(c.A,{color:"danger",icon:n.tPJ,className:"mb-4",children:m}),(0,s.jsx)(d.A,{className:"mb-6 rounded-lg shadow",hasTable:!0,children:r?(0,s.jsx)("p",{className:"p-6 text-center",children:"Loading records..."}):0!==e.length||m?(0,s.jsx)(h,{records:e,onDeleteRecord:e=>{y(e),j(!0)}}):(0,s.jsx)(c.A,{color:"warning",icon:n.tPJ,children:"No attendance records found."})}),g&&(0,s.jsxs)(o.A,{title:"Confirm Delete",buttonColor:"danger",buttonLabel:"Delete",isActive:b,onConfirm:w,onCancel:()=>{j(!1),y(null)},children:[(0,s.jsx)("p",{children:"Are you sure you want to delete the attendance record for"}),(0,s.jsxs)("p",{children:[(0,s.jsx)("b",{children:g.studentName})," on"," ",(0,s.jsx)("b",{children:g.date&&"object"==typeof g.date&&g.date instanceof Date?g.date.toLocaleDateString():g.date&&"function"==typeof g.date?.toDate?g.date.toDate().toLocaleDateString():String(g.date)}),"?"]}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"This action cannot be undone."})]})]})}},48439:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/record/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/record/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[750,790,113,206,906],()=>r(12743));module.exports=s})();