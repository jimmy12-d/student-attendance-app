(()=>{var e={};e.id=450,e.ids=[450],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},55511:e=>{"use strict";e.exports=require("crypto")},14985:e=>{"use strict";e.exports=require("dns")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},73496:e=>{"use strict";e.exports=require("http2")},91645:e=>{"use strict";e.exports=require("net")},21820:e=>{"use strict";e.exports=require("os")},33873:e=>{"use strict";e.exports=require("path")},19771:e=>{"use strict";e.exports=require("process")},27910:e=>{"use strict";e.exports=require("stream")},34631:e=>{"use strict";e.exports=require("tls")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},5413:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var s=r(70260),a=r(28203),l=r(25155),n=r.n(l),i=r(67292),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["dashboard",{children:["manage-excuses",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,67798)),"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/manage-excuses/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,83748)),"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"]}],c=["/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/manage-excuses/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/dashboard/manage-excuses/page",pathname:"/dashboard/manage-excuses",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},40769:(e,t,r)=>{Promise.resolve().then(r.bind(r,67798))},53921:(e,t,r)=>{Promise.resolve().then(r.bind(r,27156))},15660:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(45512),a=r(83877);let l=({htmlFor:e,children:t,...r})=>(0,s.jsx)("label",{htmlFor:e,className:`block mb-2 font-semibold ${e?"cursor-pointer":""} ${r.className??""}`,children:(0,s.jsx)("span",{className:"line-clamp-1",children:t})}),n=({children:e,...t})=>{let r={className:["px-3 py-2 max-w-full border-gray-700 rounded-sm w-full dark:placeholder-gray-400","focus:ring-3 focus:ring-blue-600 focus:border-blue-600 focus:outline-hidden",t.hasTextareaHeight?"h-24":"h-12",t.isBorderless?"border-0":"border",t.isTransparent?"bg-transparent":"bg-white dark:bg-slate-800",t.icon?"pl-10":""].join(" ")};return(0,s.jsxs)("div",{className:"mb-2 last:mb-0",children:[t.label&&(0,s.jsx)(l,{htmlFor:t.labelFor,children:t.label}),(0,s.jsxs)("div",{className:"relative",children:[e(r),t.icon&&(0,s.jsx)(a.A,{path:t.icon,w:"w-10",h:t.hasTextareaHeight?"h-full":"h-12",className:"absolute top-0 left-0 z-10 pointer-events-none text-gray-500 dark:text-slate-400"})]}),t.help&&(0,s.jsx)("div",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:t.help})]})}},66055:(e,t,r)=>{"use strict";r.d(t,{A:()=>o});var s=r(45512),a=r(12113),l=r(58009),n=r(37954),i=r(33883),d=r(83877);let o=({outline:e=!1,children:t,...r})=>{let o=e?n.Fw[r.color]:n.cu[r.color],[c,u]=(0,l.useState)(!1);return c?null:(0,s.jsx)("div",{className:`px-3 py-6 md:py-3 mb-6 last:mb-0 border rounded-lg transition-colors duration-150 ${o}`,children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center mb-6 md:mb-0",children:[r.icon&&(0,s.jsx)(d.A,{path:r.icon,w:"w-10 md:w-5",h:"h-10 md:h-5",size:"24",className:"md:mr-2"}),(0,s.jsx)("span",{className:"text-center md:text-left md:py-2",children:t})]}),r.button,!r.button&&(0,s.jsx)(i.A,{icon:a.hyP,color:"white",onClick:e=>{e.preventDefault(),u(!0)},small:!0,roundedFull:!0})]})})}},80874:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var s=r(45512);r(58009);var a=r(83877),l=r(37954);function n({icon:e,color:t,w:r="w-12",h:n="h-12",bg:i=!1,className:d=""}){let o=i?l.cu[t]:`${l.Wj[t]} bg-gray-50 dark:bg-slate-800`;return(0,s.jsx)(a.A,{path:e,w:r,h:n,size:"24",className:`rounded-full ${o} ${d}`})}function i({icon:e,title:t,main:r=!1,children:l}){return(0,s.jsxs)("section",{className:`${r?"":"pt-6"} mb-6 flex items-center justify-between`,children:[(0,s.jsxs)("div",{className:"flex items-center justify-start",children:[e&&r&&(0,s.jsx)(n,{icon:e,color:"light",className:"mr-3",bg:!0}),e&&!r&&(0,s.jsx)(a.A,{path:e,className:"mr-2",size:"20"}),(0,s.jsx)("h1",{className:`leading-tight ${r?"text-3xl":"text-2xl"}`,children:t})]}),l]})}},27156:(e,t,r)=>{"use strict";r.r(t),r.d(t,{EXTENDED_GRACE_MINUTES:()=>b,STANDARD_ON_TIME_GRACE_MINUTES:()=>g,default:()=>f});var s=r(45512),a=r(58009),l=r(12113),n=r(6204),i=r(80874),d=r(24719),o=r(66055),c=r(33883),u=r(95900);let m=({students:e,onUpdateGracePeriod:t,standardGraceValue:r,extendedGraceValue:n,perPage:i=15})=>{let[d,o]=(0,a.useState)(0),[m,p]=(0,a.useState)(null),[x,h]=(0,a.useState)(""),g=e.slice(i*d,i*(d+1)),b=Math.ceil(e.length/i),f=[];for(let e=0;e<b;e++)f.push(e);let j=e=>{p(e.id),e.gracePeriodMinutes===n?h(String(n)):h(String(r))},N=async e=>{let r=parseInt(x);if(isNaN(r)||r<0){alert("Invalid grace period value.");return}A(e,!0);try{await t(e,r)}catch(e){console.error("Failed to update grace period:",e)}finally{A(e,!1),p(null)}},[v,y]=(0,a.useState)({}),A=(e,t)=>{y(r=>({...r,[e]:t}))},E=[{label:`Standard (${r} min)`,value:String(r)},{label:`Extended (${n} min)`,value:String(n)}];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:"Name"}),(0,s.jsx)("th",{children:"Class"}),(0,s.jsx)("th",{children:"Shift"}),(0,s.jsx)("th",{children:"Late Period"}),(0,s.jsx)("th",{className:"w-1/4 md:w-1/3",children:"Set Grace Period"})]})}),(0,s.jsx)("tbody",{children:g.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{"data-label":"Name",children:e.fullName}),(0,s.jsx)("td",{"data-label":"Class",children:e.class||"N/A"}),(0,s.jsx)("td",{"data-label":"Shift",children:e.shift||"N/A"}),(0,s.jsx)("td",{"data-label":"Current Grace Period",children:(0,s.jsxs)("span",{className:`px-3 py-1 inline-flex items-baseline text-xs leading-5 rounded-full whitespace-nowrap ${e.gracePeriodMinutes===n?"bg-purple-100 text-purple-800 dark:bg-purple-700 dark:text-purple-100":e.gracePeriodMinutes===r||null==e.gracePeriodMinutes||void 0===e.gracePeriodMinutes?"bg-sky-100 text-sky-800 dark:bg-sky-700 dark:text-sky-100":"bg-gray-200 text-gray-700 dark:bg-gray-600 dark:text-gray-200"}`,children:[e.gracePeriodMinutes===n&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Extended"}),(0,s.jsxs)("span",{className:"ml-1 font-normal opacity-80",children:["(",n," min)"]})]}),(e.gracePeriodMinutes===r||null==e.gracePeriodMinutes||void 0===e.gracePeriodMinutes)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{className:"font-semibold",children:"Standard"}),(0,s.jsxs)("span",{className:"ml-1 font-normal opacity-80",children:["(",r," min)"]})]}),"number"==typeof e.gracePeriodMinutes&&e.gracePeriodMinutes!==n&&e.gracePeriodMinutes!==r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"font-semibold",children:[e.gracePeriodMinutes," min"]}),(0,s.jsx)("span",{className:"ml-1 font-normal opacity-80",children:"(Custom)"})]})]})}),(0,s.jsx)("td",{"data-label":"Set Late Period",children:m===e.id?(0,s.jsxs)("div",{className:"flex items-center space-x-1 sm:space-x-2",children:[(0,s.jsx)("select",{value:x,onChange:e=>h(e.target.value),className:"input text-xs sm:text-sm py-1 px-1 sm:px-2 w-full dark:bg-slate-700",children:E.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,s.jsx)(c.A,{color:"success",icon:l.bN9,onClick:()=>N(e.id),small:!0,disabled:v[e.id]}),(0,s.jsx)(c.A,{icon:l.rZW,onClick:()=>p(null),small:!0,color:"lightDark",outline:!0,disabled:v[e.id]})]}):(0,s.jsx)(c.A,{color:"info",label:"Change",onClick:()=>j(e),small:!0,outline:!0})})]},e.id))})]})}),(0,s.jsx)("div",{className:"p-3 lg:px-6 border-t border-gray-100 dark:border-slate-800",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between py-3 md:py-0",children:[(0,s.jsx)(u.A,{children:f.map(e=>(0,s.jsx)(c.A,{active:e===d,label:(e+1).toString(),color:e===d?"lightDark":"whiteDark",small:!0,onClick:()=>o(e),isGrouped:!0},e))}),(0,s.jsxs)("small",{className:"mt-6 md:mt-0",children:["Page ",d+1," of ",b," (Total: ",e.length," students)"]})]})})]})};var p=r(15660),x=r(65167),h=r(17656);let g=15,b=30;function f(){let[e,t]=(0,a.useState)([]),[r,u]=(0,a.useState)(!0),[f,j]=(0,a.useState)(null),[N,v]=(0,a.useState)(null),[y,A]=(0,a.useState)(""),[E,P]=(0,a.useState)("all"),M=(0,a.useCallback)(async()=>{u(!0),j(null);try{let e=(0,h.P)((0,h.rJ)(x.db,"students"),(0,h.My)("fullName","asc")),r=(await (0,h.GG)(e)).docs.map(e=>{let t=e.data();return{id:e.id,fullName:t.fullName||"N/A",class:t.class,shift:t.shift,gracePeriodMinutes:void 0===t.gracePeriodMinutes?null:t.gracePeriodMinutes}});t(r)}catch(e){console.error("Error fetching students: ",e),j("Failed to fetch students. Please try again.")}u(!1)},[]),_=async(e,r)=>{v(null),j(null);try{let s=(0,h.H9)(x.db,"students",e);await (0,h.mZ)(s,{gracePeriodMinutes:r}),v("Late period updated for student."),t(t=>t.map(t=>t.id===e?{...t,gracePeriodMinutes:r}:t))}catch(e){console.error("Error updating grace period: ",e),j("Failed to update grace period. Please try again.")}setTimeout(()=>v(null),3e3)},S=(0,a.useMemo)(()=>{let t=[...e];return""!==y.trim()&&(t=t.filter(e=>e.fullName.toLowerCase().includes(y.toLowerCase()))),"standard"===E?t=t.filter(e=>e.gracePeriodMinutes===g||null==e.gracePeriodMinutes||void 0===e.gracePeriodMinutes):"extended"===E&&(t=t.filter(e=>e.gracePeriodMinutes===b)),t},[e,y,E]);return(0,s.jsxs)(n.A,{children:[(0,s.jsx)(i.A,{icon:l.uVY,title:"Manage Student Grace Periods",main:!0,children:(0,s.jsx)(c.A,{onClick:M,icon:l.kWq,label:"Refresh List",color:"info",small:!0})}),(0,s.jsx)(d.A,{className:"mb-6 px-4 py-2 pb-2 rounded-lg shadow",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:[(0,s.jsx)(p.A,{label:"Search by Student Name",labelFor:"searchNameInputManage",children:e=>(0,s.jsx)("input",{type:"text",id:"searchNameInputManage",placeholder:"Enter name...",value:y,onChange:e=>A(e.target.value),className:e.className})}),(0,s.jsx)(p.A,{label:"Filter by Late Period",labelFor:"graceFilterSelectManage",children:e=>(0,s.jsxs)("select",{id:"graceFilterSelectManage",value:E,onChange:e=>P(e.target.value),className:e.className,children:[(0,s.jsx)("option",{value:"all",children:"All Students"}),(0,s.jsxs)("option",{value:"standard",children:["Standard Late Only (",g," min)"]}),(0,s.jsxs)("option",{value:"extended",children:["Extended Late Only (",b," min)"]})]})})]})}),f&&(0,s.jsx)(o.A,{color:"danger",icon:l.uVY,className:"mb-4",children:f}),N&&(0,s.jsx)(o.A,{color:"success",icon:l.uVY,className:"mb-4",children:N}),(0,s.jsx)(d.A,{className:"mb-6 rounded-lg shadow",hasTable:!0,children:r?(0,s.jsx)("p",{className:"p-6 text-center",children:"Loading students..."}):0!==S.length||f?(0,s.jsx)(m,{students:S,onUpdateGracePeriod:_,standardGraceValue:g,extendedGraceValue:b}):(0,s.jsx)(o.A,{color:"warning",icon:l.uVY,children:"No students match your current filters."})})]})}},67798:(e,t,r)=>{"use strict";r.r(t),r.d(t,{EXTENDED_GRACE_MINUTES:()=>l,STANDARD_ON_TIME_GRACE_MINUTES:()=>a,default:()=>n});var s=r(46760);let a=(0,s.registerClientReference)(function(){throw Error("Attempted to call STANDARD_ON_TIME_GRACE_MINUTES() from the server but STANDARD_ON_TIME_GRACE_MINUTES is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/manage-excuses/page.tsx","STANDARD_ON_TIME_GRACE_MINUTES"),l=(0,s.registerClientReference)(function(){throw Error("Attempted to call EXTENDED_GRACE_MINUTES() from the server but EXTENDED_GRACE_MINUTES is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/manage-excuses/page.tsx","EXTENDED_GRACE_MINUTES"),n=(0,s.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/manage-excuses/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/jimmy/datta-able-free-react-admin-template/student-attendance-app/app/dashboard/manage-excuses/page.tsx","default")}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[750,790,113,206,906],()=>r(5413));module.exports=s})();